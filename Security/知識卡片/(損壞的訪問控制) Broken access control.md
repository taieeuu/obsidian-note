---
Date: 2024-02-07
tags:
  - 資安
---
## Protection

沒有萬能的解決方案來正確實施訪問控制。一般來說，你的訪問控制策略應該包括三個方面：

- 身份驗證 - 在用戶返回應用程序時正確識別用戶。
- 授權 - 決定用戶在通過身份驗證後應該和不應該執行的操作。
- 權限檢查- 在用戶嘗試執行操作時評估授權。  
    授權通常通過授予每個用戶特定角色來實現。（例如，管理用戶經常與普通用戶區分開來。）如果單個文檔或數據項需要具有單獨的權限，則需要實施更細化的許可方案。

授權方案通常實現所有權的概念。某些資源可以屬於一個用戶或一組用戶，未經許可，其他人可能無法訪問。

最後，訪問控制方案通常被聲明為針對某些操作將特定實體和組列入白名單或黑名單的策略。

鑑於這種複雜性，設計正確的訪問控制需要時間和深思熟慮。您需要遵循一些準則：

- 確定對您的組織來說最大的風險是什麼，並專注於減輕這些風險。
    
- 預先設計和記錄您的訪問控制方案。 需要在整個系統中正確實施訪問控制。如果沒有一套商定的規則，就很難定義“正確”的實施是什麼樣子的。
    
- 嘗試在您的代碼庫中集中訪問控制決策。 這並不一定意味著所有訪問決策都通過一個代碼路徑，但您應該有一種評估訪問控制決策的標準方法。這可能包括函數裝飾器、Web 訪問路徑檢查、數據庫中的存儲過程層、代碼中的內聯斷言或調用專用權限組件或內部 API。
    
- 嚴格測試訪問控制。 確保您的測試程序真正地試圖找到您的訪問控制方案中的漏洞。像對待攻擊者一樣對待它，當第一次真正的攻擊發生時，您會做好更充分的準備。如果您有時間和預算，可以考慮聘請外部團隊來執行滲透測試。
## 代碼示例
### Python
大多數 Python 網絡框架（Django、Flask、Tornado 等）將網絡請求路由到單獨的類或函數。在評估用戶是否應該訪問給定資源時， 裝飾器 提供了一種非常有用的語法。它們可用於在調用函數之前檢查權限，並且可以以不顯眼的聲明方式添加到代碼中。
### java
Java 身份驗證和授權服務 (JAAS) 是 Java 訪問控制的行業標準。權限可以動態或聲明方式描述，並根據 URL 路徑或代碼進行評估。

JAAS 很全面，但相對重量級。您可能還想評估Apache Shiro 項目和 Spring Security。
### .Net
[ASP.NET](http://asp.net/) 附帶一個 全面的授權和身份驗證框架，可用於在全局、特定控制器、控制器內的特定功能或代碼中的臨時位置做出訪問控制決策。
### Node
MustBe和 ACL是成熟的庫，分別專注於訪問控制的不同方面：Web 服務器路由和訪問控制規則的評估。
## 其他注意事項

**內容管理系統**  
如果您的站點大量處理文檔，就像在我們的示例練習中一樣，請考慮使用內容管理系統。複雜的規則——比如在預先商定的時間點之前禁運文件——通常可以很容易地實施。

**LDAP**  
如果您需要在多個應用程序之間共享基於角色和組的授權，您可能需要考慮投資 輕型目錄訪問協議 (LDAP)解決方案。LDAP 服務器——其中最著名的是 Microsoft 的 Active Directory——使用靈活的模式將用戶和組信息存儲在樹結構中，並允許以專用查詢語言（也稱為 LDAP，容易混淆）運行搜索。

除了Microsoft之外， Oracle和 IBM都提供了成熟的 LDAP 實現。LDAP 旨在快速、大規模地做出訪問控制和身份管理決策，但可能需要大量的前期投資。