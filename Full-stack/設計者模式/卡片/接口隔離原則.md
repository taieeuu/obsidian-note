---
Date: 2023-12-27
tags:
  - 設計者模式
---
## 原則

1. 客戶端不應該依賴她不用的接口 => 低耦合
    - 如果客戶依賴了不需要的接口，就要面臨不需要接口的變動帶來的風險。
    - 提倡不應被迫使用對其而無用的方法或功能
2. 類之間的依賴應該建立在最小的接口上面 => 高內聚
    - 把沒有關係的接口合併在一起，會形成一個臃腫的大街口，這是對職責分配和接口的汙染
    - 最小接口: 滿足項目需求的相似功能
    - 把龐大臃腫的接口拆成更小和更具體的街口

- 接口隔離: ==**多個專門的接口 > 單一的總接口**==
## 實列

場景: 設計一個遊戲，遊戲中有壞角色，為了要統一壞角色的技能，所以需要設計BadCharacterSkill這個接口
### Game v1
![[接口隔離原則 1.png|600]]

隨著遊戲發展，後期就需要更厲害的壞角色，那也因此需要設計更厲害的壞角色，所以也就多出了magicAttack和recover這兩個方法
### Game v2
![[接口隔離原則 2.png|600]]

**問題:** 在這邊MonsterBoss與Monster都是基於BadChatacterSkill這個接口去實現，而Monster本身用不到magicAttack和recover這兩個方法，但還是需要定義好這個空方法，所以可以想像以後壞角色越來越多，新的技能也會越來越多，會導致這個統一接口BadCharacter越來越臃腫，實現此接口的類，就會需要實現更多用不到的方法。那我們可以使用接口隔離原則來改進。

![[接口隔離原則 3.png|600]]

**解決:** 將基本壞角色的技能和進階的技能分開，所以Monster只需要實現BasicBadCharacterSill、MonsterBoss需要實現BasicBadCharacterSill以及AdvancedBadCharacterSkill，這樣改進可以使我們的Monster不用實現用不到的方法，從而減少代碼的耦和，之後要擴展代碼也更加的方便

## [Python Code](https://github.com/turingplanet/design-patterns-series/tree/main/v7_interface_segregation/python)
## 架構 and 複習
![[接口隔離原則 4.png|600]]

- 左邊: Monster其實只需要basicAttack方法，但由於接口比較臃腫所有的方法也放在裡面，那Monster也就要實現他不需要使用到的方法
- 右邊: 根據我們接口隔離原則所改善的方法，大接口拆分成兩個部分，basic和advance，monster只需要實現基本的基礎接口，這樣就不會被高級技能的接口所更動到。而且拆分之後各個接口的職責也更加的清晰，一個負責基礎技能，一個負責稿及技能。
## 注意事項
- 設計粒度的注意事項
    - 設計粒度上太小會適得其反
    - 設計粒度參考，一個接口只服務於一個子模塊或者業務邏輯
- 接口隔離原則 vs 單一職責原則
    - 約束偏向: 接口隔離偏向約束架構設計，單一職責偏向約束業務
    - 細化程度: 單一職責更精細，接口隔離注重相似接口的隔離